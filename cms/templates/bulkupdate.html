<%inherit file="base.html" />
<%!
  from django.core.urlresolvers import reverse
  from django.utils.translation import ugettext as _
  from openedx.core.djangolib.js_utils import js_escaped_string
%>
<%block name="title">Utilities - Bulk Update</%block>
<%block name="bodyclass">is-signedin course view-bulkupdate</%block>

<%namespace name='static' file='static_content.html'/>


<%block name="content">
<div class="wrapper-mast wrapper">
  <header class="mast has-actions has-subtitle">
    <h1 class="page-header">
      <small class="subtitle">${_("Tools / Course Utilities")}</small>
      <span class="sr">&gt; </span>${_("Update Problem Settings")}
    </h1>
  </header>
</div>

<div class="wrapper-content wrapper">
  <section class="content">
    <article class="content-primary" role="main">

        <section class="course-utility" id="bulk-update">
            <form id="bulk-update-settings-input">
                <div id="max-attempts">
                    <h3 class = "section-header-title" title="Max Attempts Setting">Max Attempts</h3>
                    <input class="input setting-input setting-input-number" type="number" value="${default_max_attempts}" min="0.0000" step="1">
                    <input type="checkbox" class="apply-existing-checkbox" name="apply-existing" value="max-attempts" />
                    <label>Apply to existing problems</label>
                </div>
                <div id="show-answer">
                    <h3 class = "section-header-title" title="Show Answer Setting">Show Answer</h3>
                    <select class="input setting-input">
                        % for option in show_answer_options:
                            % if option == default_show_answer:
                                <option value="${option}" selected>${option}</option>
                            % else:
                                <option value="${option}">${option}</option>
                            % endif
                        % endfor
                    </select>
                    <input type="checkbox" class="apply-existing-checkbox" name="apply-existing" value="show-answer" />
                    <label>Apply to existing problems</label>
                </div>
                <input type="submit" value="${_('Update')}" class="submit-button" />
            </form>
        </section>

        <p class="error-block"></p>

        <div class="wrapper wrapper-status is-hidden">
          <h3 class="title">${_("Problem Setting Update Status")}</h3>

          <ol class="status-progress list-progress">
            <li class="item-progresspoint item-progresspoint-submit is-complete">
              <span class="deco status-visual">
                <i class="icon fa fa-cog"></i>
                <i class="icon fa fa-warning"></i>
              </span>

              <div class="status-detail">
                <h3 class="title">${_("Submitting")}</h3>
                <p class="copy">${_("Submitting your new settings")}</p>
              </div>
            </li>

            <li class="item-progresspoint item-progresspoint-validate is-not-started">
              <span class="deco status-visual">
                <i class="icon fa fa-cog"></i>
                <i class="icon fa fa-warning"></i>
              </span>

              <div class="status-detail">
                <h3 class="title">${_("Validating")}</h3>
                <p class="copy">${_("Validating your new settings")}</p>
              </div>
            </li>

            <li class="item-progresspoint item-progresspoint-update is-not-started">
              <span class="deco status-visual">
                <i class="icon fa fa-cog"></i>
                <i class="icon fa fa-warning"></i>
              </span>

              <div class="status-detail">
                <h3 class="title">${_("Updating Problem Settings")}</h3>
                <p class="copy">
                    ${_("Updating your new settings for all problems in this course. This process might take longer with larger courses.")}
                </p>
              </div>
            </li>

            <li class="item-progresspoint item-progresspoint-success has-actions is-not-started">
              <span class="deco status-visual">
                <i class="icon fa fa-square-o"></i>
              </span>

              <div class="status-detail">
                <h3 class="title">
                  ${_("Success")}
                  <span class="item-progresspoint-success-date"></span>
                </h3>
                <p class="copy">
                    ${_("Your problem settings have now been updated for this course")}
                </p>
              </div>
            </li>

          </ol>
        </div>

    </article>

    <aside class="content-supplementary" role="complimentary">
      <div class="bit">
        <h3 class="title title-3">${_("What is update problem settings?")}</h3>
        <p>
          ${_("The update problem settings page provides a way to update the Max Attempts and Show Answer settings for all existing problems of the current course with a single click.")}
        </p>
      </div>
    </aside>
  </section>
</div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>

</%block>

<%block name="requirejs">
  require(["js/factories/bulkupdate"], function(BulkUpdateFactory) {
      BulkUpdateFactory(
          "${bulkupdate_update_url | n, js_escaped_string}",
          "${bulkupdate_status_url | n, js_escaped_string}"
      );
  });
</%block>
